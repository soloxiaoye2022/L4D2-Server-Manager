# L4D2 Server Manager (L4M)

一个强大、现代化的求生之路2 (Left 4 Dead 2) 服务器管理工具。
专为 Linux 环境设计，支持全平台（VPS、物理机、容器），提供流畅的 TUI 图形界面和 CLI 命令行操作。

## ✨ 核心特性

*   **🚀 一键安装 & 持久化**: 自动安装到系统，数据持久保存，防误删。
*   **💻 强大的 CLI 工具**: 安装后直接使用 `l4m` 命令管理一切，支持自更新 (`l4m update`)。
*   **🖥️ 现代化 TUI 界面**: 全键盘操作的图形化菜单，告别繁琐的指令输入。
*   **📦 多实例管理**: 支持部署无限个服务器实例，每个实例独立配置、独立运行。
*   **🛡️ 进程守护 (Watchdog)**: 基于 `tmux` 的智能守护进程，服务端崩溃后 5 秒自动重启。
*   **🔌 插件管理**: 内置插件安装/卸载功能，适配多实例路径，支持从 JS-MODS 库一键安装。
*   **🌐 全平台兼容**: 完美支持 Root 用户、普通用户以及 Termux/Proot/Chroot 容器环境。

## 📥 快速开始

在终端中执行以下命令即可一键安装或运行：

```bash
bash <(curl -s -L https://gh-proxy.com/https://raw.githubusercontent.com/soloxiaoye2022/server_install/main/server_install/linux/init.sh)
```

脚本会自动检测您的环境：
- **Root 用户**: 安装到 `/usr/local/l4d2_manager`
- **普通用户/Termux**: 安装到 `~/.l4d2_manager`

## 📖 使用指南

安装完成后，您可以在任意位置使用 `l4m` 命令：

```bash
l4m          # 打开主管理菜单 (TUI)
l4m update   # 更新管理器到最新版本
l4m install  # 重新运行安装向导 (修复安装)
```

### 主要功能模块

1.  **部署新服务器**: 
    - 交互式向导，只需输入服务器名和路径。
    - 支持 **匿名登录** 和 **Steam 账号登录** (自动处理 SteamCMD)。
    - 自动生成优化的 `server.cfg` 和启动脚本。

2.  **服务器管理**:
    - **启动/停止/重启**: 一键控制，实时反馈状态。
    - **控制台 (Console)**: 直接进入服务端控制台进行交互 (基于 tmux)，按 `Ctrl+B` 然后按 `D` 即可挂起后台。
    - **实时日志**: 查看服务端输出。
    - **启动参数**: TUI 界面直接编辑启动命令 (地图、人数、Tickrate 等)。

3.  **插件管理**:
    - 自动扫描本地或下载的 JS-MODS 库。
    - 支持批量选择安装插件。
    - 一键部署 SourceMod/MetaMod 平台。

## 🔧 高级说明

*   **进程管理**: 本工具使用 `tmux` 替代传统的 `screen`，提供更稳定的会话管理。每个服务器运行在独立的 tmux session 中 (命名为 `l4d2_<服务器名>`)。
*   **依赖检测**: 启动时会自动检查并尝试安装 `tmux`, `curl`, `lib32gcc` 等必要组件。在非 Root 环境下会提示手动安装或尝试使用 `pkg`。

## 🤝 贡献

欢迎提交 Issue 或 Pull Request 来帮助改进这个工具！
